<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>PromptLab Web</title>
    <link rel="stylesheet" href="https://use.typekit.net/eqo3cxz.css">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/ai-chat.css">
    <link rel="stylesheet" href="/css/enhanced-spacing.css">
    <link rel="stylesheet" href="/css/discord-settings.css">
    <link rel="stylesheet" href="/css/split-pane.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Auth Screen -->
    <div id="auth-screen" class="screen">
        <div class="auth-container">
            <div class="auth-logo">
                <i class="fas fa-magic"></i>
            </div>
            <h1>PromptLab</h1>
            <p class="auth-subtitle">AI-Powered Prompt Generation</p>

            <div class="auth-tabs">
                <button class="tab-btn active" data-tab="login">Login</button>
                <button class="tab-btn" data-tab="register">Register</button>
            </div>

            <form id="login-form" class="auth-form">
                <div class="form-group">
                    <i class="fas fa-envelope form-icon"></i>
                    <input type="email" id="login-email" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <i class="fas fa-lock form-icon"></i>
                    <input type="password" id="login-password" placeholder="Password" required>
                </div>
                <div id="login-error" class="error-message hal-message"></div>
                <button type="submit" class="btn-primary">Login</button>
            </form>

            <form id="register-form" class="auth-form hidden">
                <div class="form-group">
                    <i class="fas fa-user form-icon"></i>
                    <input type="text" id="register-name" placeholder="Name" required>
                </div>
                <div class="form-group">
                    <i class="fas fa-envelope form-icon"></i>
                    <input type="email" id="register-email" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <i class="fas fa-lock form-icon"></i>
                    <input type="password" id="register-password" placeholder="Password" required>
                </div>
                                <div id="register-error" class="error-message hal-message"></div>
                <button type="submit" class="btn-primary">Register</button>
            </form>
        </div>
    </div>

    <!-- Main App Screen -->
    <div id="main-screen" class="screen hidden">
        <div class="app-container">
            <!-- Left sidebar menu -->
            <div class="sidebar">
                <ul class="menu">
                    <li class="menu-item active" data-module="dashboard-module">
                        <i class="fas fa-home"></i>Dashboard
                    </li>
                    <li class="menu-item" data-module="template-builder-module">
                        <i class="fas fa-copy"></i>Template Builder
                    </li>
                    <li class="menu-item" data-module="prompt-importer-module">
                        <i class="fas fa-download"></i>Prompt Importer
                    </li>
                    <li class="menu-item" data-module="ai-chat-assistant-module">
                        <i class="fas fa-comments"></i>AI Chat Assistant
                    </li>
                    <li class="menu-item" data-module="prompt-generation-module">
                        <i class="fas fa-tasks"></i>Prompt Generation
                    </li>
                    <li class="menu-item" data-module="style-library-module">
                        <i class="fas fa-palette"></i>Style Library
                    </li>
                    <li class="menu-item" data-module="settings-module">
                        <i class="fas fa-cog"></i>Settings
                    </li>
                </ul>
                <div class="sidebar-footer">
                    <div class="user-profile">
                        <i class="fas fa-user-circle"></i>
                        <div>
                            <div id="user-name">User</div>
                            <div id="user-email" style="font-size: 11px; color: var(--text-muted);"></div>
                        </div>
                    </div>
                    <button class="btn-logout" id="logout-btn">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
            
            <!-- Main content area -->
            <div class="module-panel">
                <!-- Dashboard module -->
                <div id="dashboard-module" class="module-content active">
                    <div class="module-header">
                        <h2>Dashboard</h2>
                    </div>
                    <div class="content-card">
                        <h3>AI Model Selector</h3>
                        <select id="ai-model-selector">
                            <option value="openai/gpt-5-nano">GPT-5 Nano (OpenAI) - $0.225/M</option>
                            <option value="openai/gpt-4.1-nano">GPT-4.1 Nano (OpenAI) - $0.25/M</option>
                            <option value="meta-llama/llama-3.3-70b-instruct">Llama 3.3 70B (Meta) - $0.079/M</option>
                            <option value="google/gemini-2.0-flash-001">Gemini 2.0 Flash (Google) - $0.25/M</option>
                            <option value="openai/gpt-4o-mini">GPT-4o Mini (OpenAI) - $0.375/M</option>
                            <option value="openai/gpt-4.1-mini">GPT-4.1 Mini (OpenAI) - $1.00/M</option>
                            <option value="openai/chatgpt-4o-latest">ChatGPT 4o (OpenAI) - Premium</option>
                            <option value="anthropic/claude-3.7-sonnet">Claude 3.7 Sonnet - Premium</option>
                            <option value="google/gemma-3-27b-it">Gemma-3-27b-it (Google) - Variable</option>
                            <option value="deepseek/deepseek-r1">Deepseek R1 - Variable</option>
                        </select>
                        <h3 style="margin-top: 20px;">Quick Navigation</h3>
                        <div class="quick-navigation">
                            <button class="action-button large-button" data-module="template-builder-module"><i class="fas fa-code"></i>Template Builder</button>
                            <button class="action-button large-button" data-module="prompt-importer-module"><i class="fas fa-download"></i>Prompt Importer</button>
                            <button class="action-button large-button" data-module="ai-chat-assistant-module"><i class="fas fa-comments"></i>AI Chat Assistant</button>
                            <button class="action-button large-button" data-module="prompt-generation-module"><i class="fas fa-tasks"></i>Prompt Generation</button>
                            <button class="action-button large-button" data-module="style-library-module"><i class="fas fa-palette"></i>Style Library</button>
                            <button class="action-button large-button" data-module="settings-module"><i class="fas fa-cog"></i>Settings</button>
                        </div>
                    </div>
                    <div class="content-card">
                        <h3>Recent Prompts</h3>
                        <div id="recent-prompts-list" class="recent-prompts-grid">
                            <div class="placeholder">Your recent prompts will appear here</div>
                        </div>
                    </div>
                </div>
                
                <!-- Template Builder module -->
                <div id="template-builder-module" class="module-content">
                    <div class="module-header">
                        <h2>Template Builder</h2>
                    </div>
                    <div class="content-card">
                        <h3>Template Selection</h3>
                        <select id="templateSelect">
                            <option value="">Select a template...</option>
                        </select>
                        <div class="input-wrapper">
                            <textarea id="promptTemplate" placeholder="Template will appear here..."></textarea>
                            <span class="clear-button">×</span>
                        </div>
                        <div class="enhancers-section">
                            <h3>Template Enhancers</h3>
                            <div class="enhancer-grid">
                                <div class="enhancer-field">
                                    <label>Content Block</label>
                                    <div class="input-wrapper">
                                        <textarea class="enhancer-input" id="content-block" placeholder="Main subject or focus"></textarea>
                                        <span class="clear-button">×</span>
                                    </div>
                                </div>
                                <div class="enhancer-field">
                                    <label>Style Theme</label>
                                    <div class="input-wrapper">
                                        <textarea class="enhancer-input" id="style-theme" placeholder="Overall style or theme"></textarea>
                                        <span class="clear-button">×</span>
                                    </div>
                                </div>
                                <div class="enhancer-field">
                                    <label>Medium/Technique</label>
                                    <div class="input-wrapper">
                                        <textarea class="enhancer-input" id="medium-technique" placeholder="Art medium or technique"></textarea>
                                        <span class="clear-button">×</span>
                                    </div>
                                </div>
                                <div class="enhancer-field">
                                    <label>Color Palette</label>
                                    <div class="input-wrapper">
                                        <textarea class="enhancer-input" id="color-palette" placeholder="Color scheme"></textarea>
                                        <span class="clear-button">×</span>
                                    </div>
                                </div>
                                <div class="enhancer-field">
                                    <label>Mood/Tone</label>
                                    <div class="input-wrapper">
                                        <textarea class="enhancer-input" id="mood-tone" placeholder="Emotional tone or mood"></textarea>
                                        <span class="clear-button">×</span>
                                    </div>
                                </div>
                                <div class="enhancer-field">
                                    <label>Environment</label>
                                    <div class="input-wrapper">
                                        <textarea class="enhancer-input" id="environment-setting" placeholder="Scene or setting"></textarea>
                                        <span class="clear-button">×</span>
                                    </div>
                                </div>
                                <div class="enhancer-field">
                                    <label>Lighting</label>
                                    <div class="input-wrapper">
                                        <textarea class="enhancer-input" id="lighting" placeholder="Lighting style"></textarea>
                                        <span class="clear-button">×</span>
                                    </div>
                                </div>
                                <div class="enhancer-field">
                                    <label>Composition</label>
                                    <div class="input-wrapper">
                                        <textarea class="enhancer-input" id="composition" placeholder="Layout and framing"></textarea>
                                        <span class="clear-button">×</span>
                                    </div>
                                </div>
                                <div class="enhancer-field">
                                    <label>Artist References</label>
                                    <div class="input-wrapper">
                                        <textarea class="enhancer-input" id="artist-references" placeholder="Artist styles to reference"></textarea>
                                        <span class="clear-button">×</span>
                                    </div>
                                </div>
                                <div class="enhancer-field">
                                    <label>Whitespace Hint</label>
                                    <div class="input-wrapper">
                                        <textarea class="enhancer-input" id="whitespace-hint" placeholder="Spacing and layout hints"></textarea>
                                        <span class="clear-button">×</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="input-wrapper">
                            <textarea id="copywriterBrief" rows="8" placeholder="Paste marketing brief or copywriter content here..."></textarea>
                            <span class="clear-button">×</span>
                        </div>
                        
                    </div>
                    <div class="content-card">
                        <div class="output-header">
                            <h3>Output Preview</h3>
                            <select id="prompt-count">
                                <option value="1">1 Prompt</option>
                                <option value="3" selected>3 Prompts</option>
                                <option value="5">5 Prompts</option>
                                <option value="10">10 Prompts</option>
                                <option value="15">15 Prompts</option>
                                <option value="20">20 Prompts</option>
                            </select>
                        </div>
                        <div class="input-wrapper">
                            <textarea id="outputPreview" class="preview-textarea" readonly placeholder="Generated prompt will appear here..."></textarea>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <label for="template-ai-model" style="font-weight: bold;">AI Model:</label>
                            <select id="template-ai-model">
                                <option value="openai/gpt-5-nano">GPT-5 Nano (OpenAI) - $0.225/M</option>
                                <option value="openai/gpt-4.1-nano">GPT-4.1 Nano (OpenAI) - $0.25/M</option>
                                <option value="meta-llama/llama-3.3-70b-instruct">Llama 3.3 70B (Meta) - $0.079/M</option>
                                <option value="google/gemini-2.0-flash-001">Gemini 2.0 Flash (Google) - $0.25/M</option>
                                <option value="openai/gpt-4o-mini">GPT-4o Mini (OpenAI) - $0.375/M</option>
                                <option value="openai/gpt-4.1-mini">GPT-4.1 Mini (OpenAI) - $1.00/M</option>
                                <option value="openai/chatgpt-4o-latest">ChatGPT 4o (OpenAI) - Premium</option>
                                <option value="anthropic/claude-3.7-sonnet">Claude 3.7 Sonnet - Premium</option>
                                <option value="google/gemma-3-27b-it">Gemma-3-27b-it (Google) - Variable</option>
                                <option value="deepseek/deepseek-r1">Deepseek R1 - Variable</option>
                            </select>
                        </div>
                        <button id="generate-image-prompts" class="generate-prompts-button">
                            Generate Image Prompts...
                        </button>
                    </div>
                </div>
                
                <!-- Prompt Importer module -->
                <div id="prompt-importer-module" class="module-content">
                    <div class="module-header">
                        <h2>📥 Prompt Importer</h2>
                    </div>
                    <div class="content-card">
                        <h3>Import Prompts from External Sources</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 1.5em;">
                            Import prompts from ChatGPT, JSON files, or any text format. Parsed prompts will be processed with your current Midjourney parameters and sent to the Prompt Generation module.
                        </p>
                        
                        <div class="importer-container">
                            <div class="import-input-section">
                                <label for="prompt-import">Paste JSON, raw prompts, or ChatGPT output:</label>
                                <textarea 
                                    id="prompt-import" 
                                    placeholder='Paste prompts in any format:

JSON: {"prompts": ["prompt 1", "prompt 2"]}
Raw: One prompt per line
ChatGPT: Copy/paste ChatGPT response with prompts

Example ChatGPT output:
1. A futuristic cityscape with neon lighting
2. Vintage bookstore interior with warm ambiance
3. Abstract geometric pattern in blue and gold'
                                    rows="12"
                                ></textarea>
                                
                                <div class="import-controls">
                                    <button id="parse-prompts-btn" class="primary-btn">🔍 Parse Prompts</button>
                                    <button id="clear-import-btn" class="secondary-btn">🗑️ Clear</button>
                                    <span id="import-status" class="import-status"></span>
                                </div>
                            </div>
                            
                            <div class="import-preview-section" id="import-preview" style="display: none;">
                                <h3>📋 Parsed Prompts Preview</h3>
                                <div id="parsed-prompts-list"></div>
                                <div class="import-actions">
                                    <button id="import-prompts-btn" class="success-btn">✅ Send to Prompt Generation</button>
                                    <button id="cancel-import-btn" class="secondary-btn">❌ Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- AI Chat Assistant module -->
                <div id="ai-chat-assistant-module" class="module-content">
                    <div class="module-header">
                        <h2>🤖 AI Chat Assistant</h2>
                        <div class="chat-controls">
                            <select id="chat-ai-model" class="model-selector">
                                <option value="openai/gpt-5-nano">GPT-5 Nano (OpenAI) - $0.225/M</option>
                                <option value="openai/gpt-4.1-nano">GPT-4.1 Nano (OpenAI) - $0.25/M</option>
                                <option value="meta-llama/llama-3.3-70b-instruct">Llama 3.3 70B (Meta) - $0.079/M</option>
                                <option value="google/gemini-2.0-flash-001">Gemini 2.0 Flash (Google) - $0.25/M</option>
                                <option value="openai/gpt-4o-mini">GPT-4o Mini (OpenAI) - $0.375/M</option>
                                <option value="openai/gpt-4.1-mini">GPT-4.1 Mini (OpenAI) - $1.00/M</option>
                                <option value="openai/chatgpt-4o-latest">ChatGPT 4o (OpenAI) - Premium</option>
                                <option value="anthropic/claude-3.7-sonnet">Claude 3.7 Sonnet - Premium</option>
                                <option value="deepseek/deepseek-r1">Deepseek R1 - Variable</option>
                            </select>
                            <select id="chat-template-mode" class="model-selector">
                                <option value="freeform" selected>Freeform (No Template)</option>
                                <option value="current-template">Use Current Template</option>
                                <option value="general">General Prompts</option>
                            </select>
                            <select id="chat-template-select" class="model-selector" style="display: none;">
                                <option value="">Select Template...</option>
                            </select>
                            <button id="history-chat-btn" class="secondary-btn chat-history-btn"><i class="fas fa-history"></i> History</button>
                            <button id="clear-chat-btn" class="secondary-btn"><i class="fas fa-trash"></i> Clear Chat</button>
                        </div>
                    </div>
                    
                    <div class="chat-container">
                        <div class="chat-messages" id="chat-messages">
                            <div class="chat-message assistant-message welcome-message">
                                <div class="message-avatar">🤖</div>
                                <div class="message-content">
                                    <div class="message-text">
                                        Hi! I'm your AI prompt generation assistant. I can help you create Midjourney prompts through natural conversation.
                                        <br><br>
                                        Try asking me things like:
                                        <ul>
                                            <li>"Create 5 prompts for a cyberpunk city"</li>
                                            <li>"I need prompts for product photography"</li>
                                            <li>"Make prompts more artistic and dreamy"</li>
                                        </ul>
                                        <strong>Template Mode:</strong> Use the dropdown above to control whether I consider your current template or generate freeform prompts.
                                        <br><br>
                                        <strong>Import Feature:</strong> I'll automatically detect prompts in my responses and offer to import them to your Prompt Generation module!
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chat-input-container">
                            <div class="chat-input-wrapper">
                                <button id="file-upload-btn" class="file-upload-btn" title="Upload image or text file">
                                    <i class="fas fa-plus"></i>
                                </button>
                                <input type="file" id="file-input" accept="image/*,.txt,.md,.json" style="display: none;">
                                <textarea 
                                    id="chat-input" 
                                    placeholder="Ask me to generate prompts, refine ideas, or help with creative direction... (Ctrl+V to paste images)"
                                    rows="3"
                                ></textarea>
                                <button id="send-chat-btn" class="send-btn" disabled>
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                            <div class="file-preview" id="file-preview" style="display: none;"></div>
                            <div class="chat-status" id="chat-status"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Prompt Generation module -->
                <div id="prompt-generation-module" class="module-content">
                    <div class="module-header">
                        <h2>Prompt Generation</h2>
                    </div>
                    <div class="content-card">
                        <h3>Midjourney Parameters</h3>
                        <div class="params-grid">
                            <div class="param-field">
                                <label>Aspect Ratio</label>
                                <select id="aspect-ratio">
                                    <option value="--ar 4:3" selected>4:3 Standard</option>
                                    <option value="--ar 1:1">1:1 Square</option>
                                    <option value="--ar 16:9">16:9 Widescreen</option>
                                    <option value="--ar 9:16">9:16 Portrait</option>
                                    <option value="--ar 3:2">3:2 Photo</option>
                                    <option value="--ar 2:3">2:3 Tall</option>
                                </select>
                            </div>
                            <div class="param-field">
                                <label>Stylize</label>
                                <select id="stylize-value">
                                    <option value="--stylize 100">100 (Default)</option>
                                    <option value="--stylize 200" selected>200 (Artistic)</option>
                                    <option value="--stylize 500">500 (Enhanced)</option>
                                    <option value="--stylize 750">750 (Strong)</option>
                                    <option value="--stylize 1000">1000 (Maximum)</option>
                                </select>
                            </div>
                            <div class="param-field">
                                <label>Chaos</label>
                                <select id="chaos-value">
                                    <option value="">0 (Default)</option>
                                    <option value="--c 25" selected>25 (Subtle)</option>
                                    <option value="--c 50">50 (Varied)</option>
                                    <option value="--c 75">75 (Wild)</option>
                                    <option value="--c 100">100 (Maximum)</option>
                                </select>
                            </div>
                            <div class="param-field">
                                <label>Style Version</label>
                                <select id="style-version">
                                    <option value="--style raw" selected>Raw (Default)</option>
                                    <option value="--style standard">Standard</option>
                                </select>
                            </div>
                            <div class="param-field">
                                <label>Speed</label>
                                <select id="speed-value">
                                    <option value="--turbo">Turbo</option>
                                    <option value="--fast">Fast</option>
                                    <option value="--relax" selected>Relax</option>
                                </select>
                            </div>
                            <div class="param-field">
                                <label>Mode</label>
                                <select id="mode-value">
                                    <option value="--draft" selected>Draft</option>
                                    <option value="--standard">Standard</option>
                                </select>
                            </div>
                            <div class="param-field">
                                <label>Version</label>
                                <select id="version-value">
                                    <option value="--v 7" selected>v7</option>
                                    <option value="--v 6.1">v6.1</option>
                                    <option value="--v 6">v6</option>
                                </select>
                            </div>
                            <div class="param-field" style="grid-column: span 2;">
                                <label>Exclude Elements (--no)</label>
                                <input
                                    type="text"
                                    id="no-value"
                                    placeholder="Enter words to exclude, separated by commas"
                                />
                            </div>
                            <div class="param-field">
                                <label>Style Weight (--sw)</label>
                                <select id="style-weight-value">
                                    <option value="">None</option>
                                    <option value="--sw 0">0 (No style influence)</option>
                                    <option value="--sw 50">50 (Low influence)</option>
                                    <option value="--sw 100">100 (Default)</option>
                                    <option value="--sw 200">200 (Medium influence)</option>
                                    <option value="--sw 500">500 (High influence)</option>
                                    <option value="--sw 750">750 (Very high influence)</option>
                                    <option value="--sw 1000">1000 (Maximum influence)</option>
                                </select>
                            </div>
                            <div class="param-field" style="grid-column: span 2;">
                                <label>Personalization Profiles & Style References</label>
                                <div style="display: flex; gap: 8px; align-items: center;">
                                    <button type="button" id="open-profile-selector" class="action-button" style="flex: 1; padding: 8px 12px;">
                                        <i class="fas fa-th"></i> Select Profiles & Styles
                                    </button>
                                    <div id="selected-profiles-count" style="color: #aaa; font-size: 12px; min-width: 80px;">
                                        None selected
                                    </div>
                                </div>
                                <div id="selected-profiles-display" style="margin-top: 8px; display: none;">
                                    <div style="font-size: 11px; color: #aaa; margin-bottom: 4px;">Selected:</div>
                                    <div id="selected-profiles-list" style="display: flex; flex-wrap: wrap; gap: 4px;"></div>
                                </div>
                            </div>
                        </div>
                        <div class="param-preview" id="parameter-preview">No parameters selected</div>
                    </div>
                    
                    <div class="content-card">
                        <h3>Generated Prompts</h3>
                        <div class="prompts-wrapper" style="position: relative; z-index: 4;">
                            <div class="loading-overlay" style="display: none;">
                                <div class="loading-spinner"></div>
                                <div class="loading-text">Generating prompts...</div>
                            </div>
                            <div id="generatedPrompts" class="prompt-list"></div>
                        </div>
                        <div class="batch-actions" style="margin-top: 20px;">
                            <div class="batch-send-label">Batch Send Selected:</div>
                            <button id="send-all-discord-btn" class="action-button" style="background-color: #5865F2;">
                                <i class="fab fa-discord"></i> Send All to Discord
                            </button>
                            <div class="batch-send-label" style="margin-top: 12px;">External Browser <i class="fas fa-external-link-alt"></i>:</div>
                            <button id="send-ideogram-btn" class="action-button ideogram-btn">
                                <i class="fas fa-external-link-alt"></i> Ideogram
                            </button>
                            <button id="send-midjourney-btn" class="action-button midjourney-btn">
                                <i class="fas fa-external-link-alt"></i> Midjourney
                            </button>
                        </div>
                    </div>
                    
                    <div class="content-card">
                        <h3>Browser Settings</h3>
                        <div style="margin-bottom: 16px;">
                            <label style="display: block; margin-bottom: 8px; color: #ccc; font-size: 14px;">
                                Browser Mode (affects all sending buttons):
                            </label>
                            <div class="ios-toggle-container">
                                <span class="toggle-label">Internal</span>
                                <div class="ios-toggle">
                                    <input type="checkbox" id="browser-mode-toggle" checked>
                                    <label for="browser-mode-toggle" class="toggle-slider"></label>
                                </div>
                                <span class="toggle-label">External</span>
                            </div>
                        </div>
                        <p style="margin-top: 8px; font-size: 12px; color: #aaa; line-height: 1.4;">
                            The buttons above will show your current selection and behave accordingly.
                        </p>
                    </div>
                </div>
                
                <!-- Style Library module -->
                <div id="style-library-module" class="module-content">
                    <div class="module-header">
                        <h2>Style Library</h2>
                    </div>
                    <div class="content-card">
                        <h3>Personalization Profiles</h3>
                        <div id="profile-library" class="profile-grid"></div>
                        <button id="add-profile-btn" class="action-button" style="margin-top:16px;">
                            <i class="fas fa-plus"></i> Add Profile
                        </button>
                    </div>
                </div>
                
                <!-- Settings module -->
                <div id="settings-module" class="module-content">
                    <div class="module-header">
                        <h2>Settings</h2>
                    </div>
                    <div class="content-card">
                        <h3>User Profile</h3>
                        <div id="profile-info">
                            <div class="setting-group">
                                <label class="setting-label">Name</label>
                                <div class="setting-control" id="profile-name-display"></div>
                            </div>
                            <div class="setting-group">
                                <label class="setting-label">Email</label>
                                <div class="setting-control" id="profile-email-display"></div>
                            </div>
                        </div>
                    </div>
                    <div class="content-card">
                        <h3>Discord Integration</h3>
                        <div class="setting-description" style="margin-bottom: 16px; color: #aaa; font-size: 14px;">
                            Configure Discord to send prompts directly to Midjourney bot. <a href="https://discord.com/developers/applications" target="_blank" style="color: #4a90e2;">Get your bot token here</a>
                        </div>
                        
                        <div class="setting-group">
                            <label class="setting-label">
                                <input type="checkbox" id="discord-enabled-checkbox" style="margin-right: 8px;">
                                Enable Discord Integration
                            </label>
                        </div>

                        <div id="discord-settings-form" style="display: none;">
                            <div class="setting-group">
                                <label class="setting-label">Discord Bot Token</label>
                                <div class="setting-description">Your Discord bot token (keep this secure!)</div>
                                <input type="password" id="discord-bot-token" class="setting-input" placeholder="Your Discord bot token">
                            </div>

                            <div class="setting-group">
                                <label class="setting-label">Discord Channel ID</label>
                                <div class="setting-description">The channel where Midjourney bot listens</div>
                                <input type="text" id="discord-channel-id" class="setting-input" placeholder="Channel ID (e.g., 1234567890)">
                            </div>

                            <div style="display: flex; gap: 12px; margin-top: 16px;">
                                <button type="button" id="test-discord-btn" class="action-button">
                                    <i class="fas fa-plug"></i> Test Connection
                                </button>
                                <button type="button" id="save-discord-btn" class="action-button primary">
                                    <i class="fas fa-save"></i> Save Discord Settings
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="content-card">
                        <h3>Preferences</h3>
                        <div class="setting-group">
                            <label class="setting-label">
                                <span>Browser Preference</span>
                                <div class="setting-description">Choose where to open Midjourney and Ideogram links</div>
                            </label>
                            <div class="setting-control">
                                <select id="browser-preference" class="setting-select">
                                    <option value="external">External Browser (default system browser)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>
    
    <!-- Profile Selector Modal -->
    <div id="profile-selector-modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.5); z-index:10000; align-items:center; justify-content:center;">
        <div style="background:#363636; padding:24px; border-radius:8px; min-width:700px; max-width:90vw; max-height:80vh; margin:auto; position:relative; overflow-y:auto;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <h3 style="color:#fff; margin:0;">Select Profiles & Style References</h3>
                <button type="button" id="close-profile-selector" style="background:none; border:none; color:#ccc; font-size:20px; cursor:pointer;">&times;</button>
            </div>
            
            <div style="margin-bottom:16px;">
                <div style="color:#ccc; font-size:14px; margin-bottom:8px;">Click to select/deselect profiles. Multiple selections will be combined in your prompts.</div>
                <div style="display:flex; gap:12px; align-items:center; margin-bottom:12px;">
                    <button type="button" id="clear-all-profiles" class="action-button" style="padding:4px 8px; font-size:12px;">Clear All</button>
                    <div style="color:#aaa; font-size:12px;">
                        <span style="display:inline-flex; align-items:center; gap:4px; margin-right:12px;">
                            <div style="width:12px; height:12px; background:#4a90e2; border-radius:50%;"></div>
                            --p Profile
                        </span>
                        <span style="display:inline-flex; align-items:center; gap:4px;">
                            <div style="width:12px; height:12px; background:#5cb85c; border-radius:50%;"></div>
                            --sref Style
                        </span>
                    </div>
                </div>
            </div>
            
            <div id="profile-selector-grid" style="display:grid; grid-template-columns:repeat(auto-fill, minmax(120px, 1fr)); gap:12px; max-height:400px; overflow-y:auto; padding:8px;">
            </div>
            
            <div style="text-align:right; border-top:1px solid #555; padding-top:16px; margin-top:16px;">
                <span id="selector-selected-count" style="color:#aaa; font-size:12px; margin-right:16px;">0 selected</span>
                <button type="button" id="apply-profile-selection" class="action-button">Apply Selection</button>
            </div>
        </div>
    </div>
    
    <!-- Modal for Add/Edit Profile -->
    <div id="profile-modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.5); z-index:9999; align-items:center; justify-content:center;">
        <div style="background:#363636; padding:24px; border-radius:8px; min-width:500px; max-width:90vw; margin:auto; position:relative;">
            <h3 id="profile-modal-title">Add Profile</h3>
            <form id="profile-form">
                <label for="profile-name">Profile Name</label>
                <input type="text" id="profile-name" required style="width:100%; padding:8px; margin-bottom:12px; border:1px solid #ccc; border-radius:4px; font-size:14px;">
                
                <label style="display:block; margin-bottom:4px; font-weight:bold;">Profile Type</label>
                <div style="margin-bottom:12px; display:flex; gap:20px;">
                    <label style="display:flex; align-items:center; gap:6px; cursor:pointer;">
                        <input type="radio" id="profile-type-p" name="profile-type" value="profile" checked>
                        <i class="fas fa-user" style="color:#4a90e2;"></i>
                        <span style="color:#fff;">--p Profile (Personal Style)</span>
                    </label>
                    <label style="display:flex; align-items:center; gap:6px; cursor:pointer;">
                        <input type="radio" id="profile-type-sref" name="profile-type" value="sref">
                        <i class="fas fa-palette" style="color:#5cb85c;"></i>
                        <span style="color:#fff;">--sref Style Code (Style Reference)</span>
                    </label>
                </div>
                
                <label for="profile-id" id="profile-id-label">Profile ID</label>
                <input type="text" id="profile-id" required style="width:100%; padding:8px; margin-bottom:12px; border:1px solid #ccc; border-radius:4px; font-size:14px;" placeholder="e.g., myprofile1">
                
                <div id="thumbnail-preview" style="display:none; margin-bottom:12px; text-align:center;">
                    <div style="color:#ccc; font-size:12px; margin-bottom:6px;">Current Thumbnail:</div>
                    <img id="thumbnail-preview-image" style="max-width:100px; max-height:100px; border-radius:6px; border:1px solid #555; object-fit:cover;">
                </div>
                
                <label for="profile-thumbnail" style="display:block; margin-bottom:4px; font-weight:bold;">Thumbnail Image</label>
                <div style="margin-bottom:12px;">
                    <input type="text" id="profile-thumbnail" placeholder="Enter image URL..." style="width:100%; padding:10px; border:1px solid #ccc; border-radius:4px; font-size:14px; margin-bottom:8px;">
                </div>
                
                <label for="profile-description">Description</label>
                <textarea id="profile-description" style="width:100%; padding:8px; margin-bottom:12px; border:1px solid #ccc; border-radius:4px; font-size:14px; min-height:60px; resize:vertical;"></textarea>
                
                <div style="text-align:right; border-top:1px solid #eee; padding-top:16px; margin-top:16px;">
                    <button type="button" id="profile-cancel" class="action-button" style="margin-right:8px; background:#6c757d;">Cancel</button>
                    <button type="submit" class="action-button">Save Profile</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Load Logger first (secure environment-aware logging) -->
    <script src="/js/logger.js"></script>
    
    <!-- Load HAL 9000 Messages for auth screen -->
    <script src="/js/hal-messages.js"></script>
    
    <!-- Load IPC Adapter (converts Electron IPC to browser APIs) -->
    <script src="/js/ipc-adapter.js"></script>
    
    <!-- Load core dependencies -->
    <script src="/js/config.js"></script>
    <script src="/js/utils.js"></script>
    
    <!-- Load API layer for authentication -->
    <script src="/js/api.js"></script>
    
    <!-- Load app modules -->
    <script src="/js/global-model-sync.js"></script>
    <script src="/js/hooks.js"></script>
    <script src="/js/midjourney-handler.js"></script>
    <script src="/js/generator.js"></script>
    <script src="/js/app.js"></script>
    
    <!-- Load feature modules -->
    <script src="/js/style-library.js"></script>
    <script src="/js/template-suggestions.js"></script>
    <script src="/js/prompt-importer.js"></script>
    <script src="/js/ai-chat.js"></script>
    <script src="/js/auth-manager.js"></script>
    <script src="/js/diagnostic.js"></script>
    <script src="/js/discord-settings.js"></script>
    <script src="/js/template-builder.js"></script>
    <script src="/js/split-pane.js"></script>
</body>
</html>
